<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        div {
            width: 200px;
            height: 200px;
            background: #58a;
        }
    </style>
</head>
<body>
    <div id="ad"></div>
    <script>
        //解构赋值的函数属性
        const zhao = {
            name:'赵本山',
            age:'18',
            xiaopin(){
                console.log('111');
            }
        };
        // 这里在解构赋值的时候，好像要名字一样
        let {xiaopin} = zhao;
        xiaopin();



        //ES6的箭头函数
        // 声明一个函数
            // 之前的方式
            // let fn = function(){

            // }

            // 箭头函数的方式
            let fn = (a,b) => {
                return a + b;
            }
            //调用
            let res = fn(1,2);
            console.log(res);

        //箭头函数声明的特性
            //1.this是静态的，this的指向始终指向函数声明时所在作用域下的this的值
            function getName(){
                console.log(this.name);
            }
            let getName2 = () => {
                console.log(this.name); //现在getName2的声明是在全局声明的,所以他的this指向始终是window的this
            }

            window.name = '许光烨';
            const school = {
                name:'123',
            }

            //直接调用
            getName();
            getName2();//目前这两个都是window下的this指向

            //call 方法调用
            getName.call(school);//这个call方法就是将this指向修改成school的this指向，所以输出123
            getName2.call(school); //这里函数声明是箭头函数声明的，所以他的this指向不发生改变

            //2.不能作为构造实例化对象
                // let Person = (name,age) => {
                //     this.name = name;
                //     this.age = age;
                // }
                // let me = new Person('xiao',30);
                // console.log(me);      报错报错
            
            //3.不能使用arguments 变量
                // let fn1 = () => {
                //     console.log(arguments);
                // }
                // fn1(1,2,3)       报错报错

            //4.箭头函数的简写
                    //1.省略小括号，当形参有且只有一个的时候
                    let add = n => {
                        return n+n;
                    }
                    console.log(add(9));
                    //2.省略花括号，当代码体只有一条语句的时候，return也省略，而且语句的执行结果就是函数的返回值
                    let pow = n => n*n;
                    console.log(pow(8));


        //箭头函数的实践
        //--1. 点击div 两秒之后变颜色
                //常规方法
                // let ad = document.getElementById('ad');
                // ad.addEventListener("click",function () {
                //     let that = this;//这里是要对当前作用域下的this值进行保存，如果不进行保存，下面直接用this，他的指向是window，不行
                //     setTimeout(function(){
                //         that.style.background = 'pink'
                //     },2000)
                // });

                //箭头函数的方法
                let ad = document.getElementById('ad');
                ad.addEventListener("click",function () {
                    setTimeout(() => {
                        this.style.background = 'pink'
                    },1000)
                });
                //这里使用箭头函数this的指向是静态的，this的指向是函数声明时所在作用域内，还要在往上推一层，也就是ad这个事件源

        //--2. 从数组中返回偶数的元素
                const arr = [1,6,9,10,100,25];
                // const result = arr.filter(function(item){
                //     if(item % 2 === 0){
                //         return true;
                //     }else{
                //         return false;
                //     }
                // });
                const result = arr.filter(item => item % 2 === 0)
                console.log(result);

            //箭头函数适合与this无关的回调，，定时器，数组的方法回调
            //箭头函数不适合与this有关的回调，事件回调，对象的方法
    </script>
</body>
</html>